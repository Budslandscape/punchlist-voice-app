<!DOCTYPE html>
<html>
<head>
  <title>Voice Test</title>
</head>
<body>
  <h2>Voice Recognition Test</h2>
  <button id="startBtn">Start Voice Note</button>
  <button id="retryBtn">Retry</button>
  <textarea id="output" rows="5" cols="50" placeholder="Your text will appear here..."></textarea>

  <script>
    let recognition;
    let capturedText = "";

    window.addEventListener("DOMContentLoaded", () => {
      const startBtn = document.getElementById("startBtn");
      const retryBtn = document.getElementById("retryBtn");
      const output = document.getElementById("output");

      if (!("webkitSpeechRecognition" in window)) {
        alert("Speech recognition not supported in this browser.");
        return;
      }

      recognition = new webkitSpeechRecognition();
      recognition.continuous = false;
      recognition.interimResults = false;
      recognition.lang = "en-US";

      recognition.onresult = (event) => {
        capturedText = event.results[0][0].transcript;
        output.value = capturedText;
      };

      recognition.onerror = (event) => {
        alert("Speech error: " + event.error);
      };

      startBtn.onclick = () => recognition.start();
      retryBtn.onclick = () => {
        output.value = "";
        capturedText = "";
      };
    });
  </script>
</body>
</html>
